<!-- <script>
    let deferredPrompt;
    const installButton = document.getElementById('install_posms_app_button');

    window.addEventListener('beforeinstallprompt', (e) => {
        // ป้องกันไม่ให้แสดงแถบติดตั้งเริ่มต้น
        e.preventDefault();
        // เก็บเหตุการณ์เพื่อเรียกใช้งานภายหลัง
        deferredPrompt = e;
        // แสดงปุ่มติดตั้ง
        installButton.style.display = 'block';

        installButton.addEventListener('click', async () => {
            // แสดง prompt ให้ผู้ใช้ติดตั้งแอป
            deferredPrompt.prompt();
            // รอให้ผู้ใช้ตอบสนองต่อ prompt
            const { outcome } = await deferredPrompt.userChoice;
            console.log(`User response to the install prompt: ${outcome}`);
            // รีเซ็ตค่า deferredPrompt
            deferredPrompt = null;
            // ซ่อนปุ่มติดตั้งหลังจากใช้งาน
            installButton.style.display = 'none';
        });
    });

    window.addEventListener('appinstalled', () => {
        console.log('PWA has been installed');
    });
</script> -->
<!-- jQuery -->
<script src="/assets/plugins/jquery/jquery.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="/assets/plugins/jquery-ui/jquery-ui.min.js"></script>
<!-- Bootstrap 4 -->
<script src="/assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- ChartJS -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="/assets/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- overlay Scrollbars -->
<script src="/assets/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
<!-- Summernote -->
<script src="/assets/plugins/summernote/summernote-bs4.min.js"></script>
<!-- AdminLTE App -->
<script src="/assets/dist/js/adminlte.min.js"></script>
<!-- JSBarCode -->
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>
<script type="text/javascript">
    JsBarcode(".barcode").init();
</script>
<!-- Script main -->
<script src="/assets/js/Javascript.js"></script>
<script>
    (function () {
        'use strict';
        window.addEventListener('load', function () {
            // Get the forms we want to apply custom Bootstrap validation styles to
            var forms = document.getElementsByClassName('needs-validation');
            // Loop over them and prevent submission
            Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script>
<script>
    let deferredPrompt;

    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/service-worker.js').then((registration) => {
                console.log('Service Worker registered with scope:', registration.scope);
            }, (error) => {
                console.log('Service Worker registration failed:', error);
            });
        });
    }

    window.addEventListener('beforeinstallprompt', (e) => {
        // ป้องกันไม่ให้แสดงแถบติดตั้งเริ่มต้น
        e.preventDefault();
        // เก็บเหตุการณ์เพื่อเรียกใช้งานภายหลัง
        deferredPrompt = e;
    });

    document.getElementById('install_posms_app_button').addEventListener('click', async (e) => {
        e.preventDefault(); // ป้องกันการทำงานปกติของลิงก์
        if (deferredPrompt) {
            deferredPrompt.prompt(); // แสดง prompt ให้ผู้ใช้ติดตั้งแอป
            const { outcome } = await deferredPrompt.userChoice;
            console.log(`User response to the install prompt: ${outcome}`);
            deferredPrompt = null; // รีเซ็ตค่า deferredPrompt
        } else {
            console.log('Cannot prompt install; deferredPrompt is not available');
        }
    });

    window.addEventListener('appinstalled', () => {
        console.log('PWA has been installed');
    });
</script>
